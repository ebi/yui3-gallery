YUI.add("gallery-overlay-box",function(a){var b="overlay-box";a.OverlayBox=a.Base.create(b,a.Base,[],{initializer:function(f){f=f||{};var c,g,e,d;c=a.Node.create('<div class="yui3-overlaybox yui3-overlaybox-hidden"></div>');if(!f.container){e=a.Node.create('<div class="yui3-overlaybox-close-button">&nbsp;</div>');e.on("click",function(h){h.halt();this.hide();},this);c.append(e);c.append('<div class="content" />');if(f.url){c.addClass("yui3-overlay-loading");}else{}}else{g=a.one("#"+f.container);c.insert(g.cloneNode(true),"replace");c.get("firstChild").removeClass("yui3-overlaybox-hidden");g.remove();this._set("loadedContent",true);}a.one(document.body).append(c);this.set("container",c);if(!f.greyOverlay){d=a.Node.create('<div class="yui3-overlaybox-mask yui3-overlaybox-hidden"></div>');d.on("click",this.hide,this);a.one(document.body).append(d);this.set("greyOverlay",d);this.set("nonCustomOverlay",true);}a.on("windowresize",function(){a.later(100,this,this.refresh);},this);},destructor:function(){this.hide();if(this.get("overlay")){this.get("overlay").destroy();}if(this.get("nonCustomOverlay")&&this.get("greyOverlay")){this.get("greyOverlay").remove();}this.get("container").remove();},show:function(){var c,d,e;c=this.get("overlay");if(false===this.get("loadedContent")||true===this.get("reload")){this.get("container").addClass("yui3-overlaybox-invisible");d=new a.Dispatcher({node:this.get("container").one(".content")});d.on("ready",this._showAfterDispatch,this);d.set("uri",this.get("url"));this._set("loadedContent",true);}if(this.get("toggleHidden")){this.get("container").removeClass("yui3-overlaybox-hidden");}if(a.Lang.isUndefined(c)){c=new a.Overlay({srcNode:this.get("container"),zIndex:this.get("zIndex"),centered:this.get("centered")});if(this.get("keepAligned")){c.plug(a.Plugin.OverlayKeepaligned);}c.render();this.set("overlay",c);}this.get("greyOverlay").removeClass("yui3-overlaybox-hidden");e=a.one(document).on("keypress",function(f){if(27===f.keyCode){f.halt();this.hide();}},this);this._set("keyHandle",e);c.show();this.refresh();},_showAfterDispatch:function(){this.refresh();this.get("container").removeClass("yui3-overlaybox-invisible");},hide:function(){if(this.get("toggleHidden")){this.get("container").addClass("yui3-overlaybox-hidden");}this.get("greyOverlay").addClass("yui3-overlaybox-hidden");if(this.get("overlay")){this.get("overlay").hide();}if(this.get("keyHandle")){this.get("keyHandle").detach();}},refresh:function(){if(!a.Lang.isUndefined(this.get("overlay"))){this.get("overlay").syncUI();}},setContent:function(c){this.get("container").insert(c);this.refresh();},bindClick:function(c){return c.on("click",function(d){d.halt();this.show();},this);}},{ATTRS:{container:{readOnly:true},url:{writeOnce:"initOnly",validator:a.Lang.isString},greyOverlay:{writeOnce:true},nonCustomOverlay:{value:false},toggleHidden:{value:true,validator:a.Lang.isBoolean},reload:{value:false,validator:a.Lang.isBoolean},loadedContent:{value:false,readOnly:true},overlay:{writeOnce:true},zIndex:{writeOnce:"initOnly",value:99},keyHandle:{readOnly:true},centered:{value:true},keepAligned:{value:true}}});},"@VERSION@",{skinnable:true,requires:["base","node-base","gallery-overlay-extras","gallery-dispatcher","event-resize"]});